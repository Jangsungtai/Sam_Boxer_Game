beat-boxer-game/
├── config/                  # (3단계) 변경 잦은 설정 파일
│   ├── rules.json           # 판정 시간, 펀치 감도 등
│   ├── difficulty.json      # Easy, Normal, Hard 난이도별 설정
│   └── ui.json              # 색상, 폰트 크기, UI 좌표
│
├── core/                    # (1-2단계) 핵심 게임 로직
│   ├── __init__.py
│   ├── game_manager.py      # 메인 루프, 점수/콤보, 씬 관리
│   ├── pose_tracker.py      # (핵심) Mediapipe 래퍼, 캘리브레이션, 동작 감지
│   ├── note.py              # 노트 객체 (이동, 그리기)
│   ├── audio_manager.py     # (4단계) 사운드, 음악 재생
│   └── judgement.py         # (선택적) 판정 로직만 따로 분리
│
├── assets/                  # (3-4단계) 리소스 파일
│   ├── beatmaps/            # 곡 데이터
│   │   └── song1/
│   │       ├── beatmap.json
│   │       └── music.mp3
│   ├── sounds/              # 효과음
│   │   ├── hit_perfect.wav
│   │   ├── hit_good.wav
│   │   ├── miss.wav
│   │   └── bomb.wav
│   └── fonts/               # (선택적) 사용할 폰트
│
├── scenes/                  # (5단계) 게임 씬
│   ├── __init__.py
│   ├── main_menu_scene.py   # 곡/난이도 선택
│   ├── game_scene.py        # 실제 게임 플레이
│   └── result_scene.py      # 결과 화면
│
├── main.py                  # (1단계) 프로그램 시작점
└── requirements.txt         # (1단계) 필요한 라이브러리


1단계: 환경 설정 및 핵심 기술 검증 (MVP-1)
목표: 가장 위험하고 핵심적인 기술(포즈 인식, 펀치 감지)이 의도대로 작동하는지 최소한의 코드로 검증합니다.

폴더 구조 생성: 기억하신 beat-boxer-game/ 구조를 만듭니다.

라이브러리 확정: requirements.txt에 opencv-python, mediapipe, numpy, pygame을 정의하고 설치합니다.

핵심 모듈 구현 (core/pose_tracker.py):

main.py에서 PoseTracker를 임포트하여 다음을 확인합니다.

[✔️] 카메라가 켜지는가?

[✔️] 캘리브레이션(어깨너비, 더킹 라인)이 계산되고 화면에 그려지는가?

[✔️] 펀치(Jab) / 더킹(Duck) 동작 시 터미널에 "JAB_L!", "DUCK!"이 출력되는가?

(이 단계에서는 노트, 점수, 음악 등 다른 모든 것을 무시합니다.)

2단계: 핵심 게임 루프 구현 (MVP-2)
목표: "노트가 날아오고, 펀치로 맞추면, 판정이 뜬다"는 게임의 기본 순환을 완성합니다.

게임 관리자 구현 (core/game_manager.py): 메인 게임 루프, 점수, 콤보를 관리할 클래스를 구현합니다.

엔티티 구현 (core/note.py): Note 클래스(스폰, 이동, 그리기)를 구현합니다.

임시 비트맵 사용: main.py에 DEMO_MAP = [...] (JSON 구조)을 하드코딩합니다.

판정 로직 구현: GameManager 내부에 _handle_hits, _check_misses 등 판정 로직을 구현합니다.

[✔️] main.py 실행 시, 하드코딩된 비트맵에 따라 노트가 날아와야 합니다.

[✔️] 펀치/더킹 시 "PERFECT", "MISS" 등 텍스트가 화면에 출력되어야 합니다.

[✔️] 점수와 콤보가 올라가야 합니다.

3단계: 설정 분리 (Decoupling) 🔧
목표: 말씀하신 대로, 변경이 잦은 부분(규칙, UI, 난이도)을 코드 밖으로 완전히 분리합니다.

config 폴더 활용:

config/rules.json: 판정 규칙 (판정 시간, 펀치 감도 임계값 등)

config/difficulty.json: 난이도 룰 (Easy/Hard별 노트 속도, 판정 배율 등)

config/ui.json: UI 레이아웃 (색상, 텍스트 위치 등)

assets 폴더 활용:

assets/beatmaps/song1/beatmap.json: 하드코딩했던 비트맵을 외부 JSON 파일로 분리합니다.

리팩터링: GameManager가 시작 시 이 config 파일들을 읽어오도록 수정합니다.

4단계: "재미" 추가 (Polishing & The Juice) ✨
목표: 게임을 '작동하는 프로토타입'에서 '재미있는 게임'으로 만듭니다.

사운드 연동 (core/audio_manager.py):

assets/sounds/에 hit_perfect.wav, bomb.wav 등 효과음 추가.

GameManager의 판정 로직에 audio_manager.play(...) 호출을 추가합니다.

음악 싱크:

GameManager가 assets/beatmaps/song1/music.mp3를 pygame.mixer.music으로 재생하고, 이 시작 시간을 start_time과 동기화합니다.

시각 효과 (VFX) 추가:

'PERFECT' 시 폭발 이펙트, 콤보 텍스트 깜박임 효과 등을 추가합니다.

5단계: 씬(Scene) 관리 및 패키징
목표: 타이틀 화면, 결과 화면 등 게임 외적인 흐름을 만듭니다.

씬 관리자 구현 (scenes/):

SceneManager를 도입하거나 GameManager를 확장합니다.

MainMenuScene 구현: 곡 선택, 난이도 선택 UI.

ResultScene 구현: 최종 점수, 최대 콤보, 랭크(A, B, C) 표시.

최종 정리: main.py는 이제 SceneManager를 실행하는 역할만 하도록 정리합니다.



코(NOSE): 0번

왼쪽 손목 (LEFT_WRIST): 15번

오른쪽 손목 (RIGHT_WRIST): 16번